import{a as e,D as a,r as l,A as s,C as o,o as u,f as t,b as n,g as d,T as c,I as i,E as r,G as v,H as m,c as p,w as f,e as g,F as _,i as k,J as h,h as y,l as C,B as V,K as b,L as I,M as x}from"./index-BuFgFvq9.js";import{e as j,f as w,h as N,i as U,j as L,k as q}from"./index.Cz2X8r-q.js";import{_ as J}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{o as S}from"./uni-app.es.CLGQIBZ8.js";const T=J(e({__name:"CodeLogin",props:{modelValue:{},modelModifiers:{}},emits:a(["changeCode"],["update:modelValue"]),setup(e,{emit:a}){const r=a,v=l("");s(v,(()=>{r("changeCode",v.value),console.log(v.value)}));const m=o(e,"modelValue");return(e,a)=>{const l=i;return u(),t(c,{to:"body"},[n("div",{class:"whole"},[n("p",null,[n("span",{onClick:a[0]||(a[0]=e=>m.value=!m.value)},"收起")]),n("p",{class:"getCode"},[d(l,{type:"text",modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=e=>v.value=e),placeholder:"请输入验证码"},null,8,["modelValue"]),n("span",null,"重新获取验证码?")])])])}}}),[["__scopeId","data-v-0053f6ed"]]),A=J(e({__name:"QRcodeLogin",setup(e){const a=l(0),s={};S((()=>{clearInterval(a.value)})),r((()=>{clearInterval(a.value)}));const o=l("");return j().then((e=>{const l=e.data.data.unikey;w(e.data.data.unikey).then((e=>{o.value=e.data.data.qrimg,a.value=setInterval((()=>{N(l).then((e=>{console.log(e.data),802===e.data.code&&console.log(e),803===e.data.code&&(console.log(e.data),s.cookie=e.data.cookie,console.log(s),v({key:"userInfo",data:JSON.stringify(s),success:function(){m({url:"/pages/index/index"})}}),clearInterval(a.value)),800===e.data.code&&clearInterval(a.value)}))}),1e3)}))})),(e,a)=>(u(),t(c,{to:"body"},[n("div",{class:"whole"},[n("img",{src:o.value,alt:""},null,8,["src"])])]))}}),[["__scopeId","data-v-4bc35793"]]),D=J(e({__name:"login",setup(e){const a=l(!0),o=l(""),c=l(!1),r=l(!1),j=l(!1),w=l(!1),N=()=>{o.value=""},J=l(0),S=e=>{J.value=e};s(J,(()=>{4===String(J.value).length&&q(Number(o.value),J.value).then((e=>{console.log(e),e.data.data&&m({url:"/pages/index/index"})}))}));const D=async()=>{if(!c.value)return void(r.value=!0);console.log(Number(o.value));/^1[3,4,5,6,7,8,9]\d{9}$/.test(o.value)?(j.value=!0,U(Number(o.value))):alert("请输入正确的手机号码")},H=()=>{c.value=!0};s(o,(()=>{a.value=o.value.length>0}),{immediate:!0});const M=async()=>{if(!c.value)return void(r.value=!0);const e=await L();if(200===e.data.code){console.log(e.data.userId);const a={cookie:e.data.cookie,createTime:e.data.createTime,userId:e.data.userId};v({key:"userInfo",data:JSON.stringify(a),success:function(){m({url:"/pages/index/index"})}})}};return(e,l)=>{const s=k,v=C,m=i,U=V,L=h,q=b,J=I,O=x;return u(),p(_,null,[n("div",{class:"whole"},[n("div",{class:"app"},[d(s,null,{default:f((()=>[n("img",{src:"/assets/music-DUeqHshX.png"})])),_:1})]),n("div",{class:"login"},[d(s,{class:"uni-form-item"},{default:f((()=>[d(v,{class:"countrycode"},{default:f((()=>[y("+86")])),_:1}),d(m,{class:"uni-input",type:"tel",modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value=e),focus:"",placeholder:"请输入手机号"},null,8,["modelValue"]),a.value?(u(),t(U,{key:0,type:"clear",size:"26",onClick:N})):g("",!0)])),_:1}),d(L,{class:"quickLogin",onClick:D},{default:f((()=>[y("验证码登录")])),_:1}),d(s,{class:"agreement"},{default:f((()=>[d(O,{onChange:l[1]||(l[1]=e=>c.value=!c.value)},{default:f((()=>[d(J,{class:"label"},{default:f((()=>[d(q,{class:"checkbox",checked:c.value},null,8,["checked"]),y("我已阅读 ")])),_:1})])),_:1})])),_:1}),d(s,{onClick:l[2]||(l[2]=e=>w.value=!0)},{default:f((()=>[y("二维码登录")])),_:1})]),d(s,{class:"tourist",onClick:M},{default:f((()=>[y("立即体验")])),_:1}),r.value?(u(),t(s,{key:0,class:"dialog",onClick:l[3]||(l[3]=e=>r.value=!r.value)},{default:f((()=>[d(s,{class:"btns"},{default:f((()=>[d(s,{class:"tip"},{default:f((()=>[d(v,null,{default:f((()=>[y("同意协议后登录")])),_:1})])),_:1}),d(s,{class:"agree"},{default:f((()=>[d(L,{class:"button noAgree"},{default:f((()=>[y("不同意")])),_:1}),d(L,{class:"button agree",onClick:H},{default:f((()=>[y("同意并继续")])),_:1})])),_:1})])),_:1})])),_:1})):g("",!0)]),j.value?(u(),t(T,{key:0,modelValue:j.value,"onUpdate:modelValue":l[4]||(l[4]=e=>j.value=e),onChangeCode:S},null,8,["modelValue"])):g("",!0),w.value?(u(),t(A,{key:1,modelValue:w.value,"onUpdate:modelValue":l[5]||(l[5]=e=>w.value=e)},null,8,["modelValue"])):g("",!0)],64)}}}),[["__scopeId","data-v-f0385b03"]]);export{D as default};
